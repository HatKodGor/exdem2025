# *exdem2025*
###
# МОДУЛЬ_1

<br/>

#### Установка/предустановка необходимых пакетов

<br/>

 **Произведите базовую настройку устройств**
 
**● Настройте имена устройств согласно топологии. Используйте полное доменное имя**

● На всех устройствах необходимо сконфигурировать IPv4

● IP-адрес должен быть из приватного диапазона, в случае, если сеть локальная, согласно RFC1918

● Локальная сеть в сторону HQ-SRV(VLAN100) должна вмещать не более 64 адресов

● Локальная сеть в сторону HQ-CLI(VLAN200) должна вмещать не более 16 адресов

● Локальная сеть в сторону BR-SRV должна вмещать не более 32 адресов

● Локальная сеть для управления(VLAN999) должна вмещать не более 8 адресов

● Сведения об адресах занесите в отчёт, в качестве примера используйте Таблицу 3

<br/>

<br/>

<p align="center">
  <img width="450" height="600" src="https://github.com/user-attachments/assets/8ee209f5-6fed-4f03-bbe3-e202155957b3"
<p\>
<p align="center"><strong>Топология</strong></p>

<br/>

## Задание 1

### Произведите базовую настройку устройств

- Настройте имена устройств согласно топологии. Используйте полное доменное имя

- На всех устройствах необходимо сконфигурировать IPv4

- IP-адрес должен быть из приватного диапазона, в случае, если сеть локальная, согласно RFC1918

- Локальная сеть в сторону HQ-SRV(VLAN100) должна вмещать не более 64 адресов

- Локальная сеть в сторону HQ-CLI(VLAN200) должна вмещать не более 16 адресов

- Локальная сеть в сторону BR-SRV должна вмещать не более 32 адресов

- Локальная сеть для управления(VLAN999) должна вмещать не более 8 адресов

- Сведения об адресах занесите в отчёт, в качестве примера используйте Таблицу 3

<br/>

<details>
<summary>Решение</summary>
<br/>

**Полное доменное имя можно посмотреть в таблице для [Задания 10](https://github.com/damh66/demo2025/tree/main/module1#%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-10)**

<br/>

#### Настройка имен устройств на ALT Linux
```yml
hostnamectl set-hostname <FQDN>; exec bash
```
> FQDN (Fully Qualified Domain Name) - полное доменное имя
> 
> `exec bash` - обновление оболочки

<br/>

#### Настройка имен устройств на EcoRouter

Переходим в режим конфигурации и прописываем следующее:
```yml
hostname <name>
```
> `<name>` - желаемое имя устройства

<br/>

<table align="center">
  <tr>
    <td align="center">Сеть</td>
    <td align="center">Адрес подсети</td>
    <td align="center">Пул-адресов</td>
  </tr>
  <tr>
    <td align="center">SRV-Net (VLAN 100)</td>
    <td align="center">192.168.100.0/26</td>
    <td align="center">192.168.100.1 - 192.168.100.62</td>
  </tr>
  <tr>
    <td align="center">CLI-Net (VLAN 200)</td>
    <td align="center">192.168.200.0/28</td>
    <td align="center">192.168.200.1 - 192.168.200.14</td>
  </tr>
  <tr>
    <td align="center">BR-Net</td>
    <td align="center">192.168.0.0/27</td>
    <td align="center">192.168.0.1 - 192.168.0.30</td>
  </tr>
  <tr>
    <td align="center">MGMT (VLAN 999)</td>
    <td align="center">192.168.99.0/29</td>
    <td align="center">192.168.99.1 - 192.168.99.6</td>
  </tr>
  <tr>
    <td align="center">ISP-HQ</td>
    <td align="center">172.16.4.0/28</td>
    <td align="center">172.16.4.1 - 172.16.4.14</td>
  </tr>
  <tr>
    <td align="center">ISP-BR</td>
    <td align="center">172.16.5.0/28</td>
    <td align="center">172.16.5.1 - 172.16.5.14</td>
  </tr>
</table>
<p align="center"><strong>Таблица подсетей</strong></p>

<br/>

- **Пример таблицы адресации:**

  | Имя Устройства | IPv4                    | Интерфейс      | NIC     | Шлюз        |
  |----------------|-------------------------|----------------|---------|-------------|
  | ISP            | NAT (inet)              | ens33          | Internet|             |
  |                | 172.16.4.14/28          | ens34          | ISP_HQ  |             |
  |                | 172.16.5.14/28          | ens35          | ISP_BR  |             |
  |________________|_________________________|________________|_________|_____________|
  | HQ-RTR         | 172.16.4.1/28           | toISP(ge0)     | ISP_HQ  | 172.16.4.14 |
  |                | 192.168.0.81/29         | vl999          |         |             |
  |                | 192.168.0.62/26         | vl100(ge1)     |         |             |
  |                | 192.168.1.78/28         | vl200(ge1)     | HQ_NET  |             |
  |                | 172.16.0.1/30           | GRE            | TUN     |             |
  |________________|_________________________|________________|_________|_____________|
  | HQ-SRV         | 192.168.0.2/26          | ens34.100@ens34| SRV_NET | 192.168.0.62|
  |________________|_________________________|________________|_________|_____________|
  | HQ-CLI         | 192.168.1.65/28 (DHCP)  | ens34.200@ens34| CLI_NET | 192.168.1.78|
  |________________|_________________________|________________|_________|_____________|
  | BR-RTR         | 172.16.5.1/28           | toISP(ge0)     | ISP_BR  | 172.16.5.14 |
  |                | 192.168.2.1/27          | toBRS_RV(ge1)  | BR_NET  |             |
  |                | 172.16.0.2/30           | GRE            | TUN     |             |
  |________________|_________________________|________________|_________|_____________|
  | BR-SRV         | 192.168.2.2/27          | ens34          | BR_NET  | 192.168.2.1 |

> Адресация для **ISP** взята из следующего задания

<br/>

#### Наcтройка IP-адресации на **HQ-SRV**, **BR-SRV**, **HQ-CLI** (настройка IP-адресации на **ISP** проводится в [следующем задании](https://github.com/damh66/demo2025/tree/main/module1#%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-2))

Приводим файлы **`options`**, **`ipv4address`**, **`ipv4route`** в директории **`/etc/net/ifaces/*имя интерфейса*/`** к следующему виду (в примере **HQ-SRV**):
```yml
BOOTPROTO=static
TYPE=eth
NM_CONTROLLED=no
DISABLED=no
CONFIG_IPV4=yes
```
> **`nmcli`** (для того чтобы установить nmcli)


<br/>

#### Настройка IP-адресации на EcoRouter

Настраиваем интерфейс на **HQ-RTR**, который смотрит в сторону **ISP**:

- Создаем логический интерфейс:
```yml
interface int0
  description "to isp"
  ip address 172.16.4.2/28
```

- Настраиваем физический порт:
```yml
port ge0
  service-instance ge0/int0
    encapsulation untagged
```

- Объединеняем порт с интерфейсом:
```yml
interface int0
  connect port ge0 service-instance ge0/int0
```

<br/>

Настраиваем интерфейсы на **HQ-RTR**, которые смотрят в сторону **HQ-SRV** и **HQ-CLI** (с разделением на VLAN):

- Создаем два интерфейса:
```yml
interface int1
  description "to hq-srv"
  ip address 192.168.100.1/26
!
interface int2
  description "to hq-cli"
  ip address 192.168.200.1/28
```

- Настраиваем порт:
```yml
port ge1
  service-instance ge1/int1
    encapsulation dot1q 100
    rewrite pop 1
  service-instance ge1/int2
    encapsulation dot1q 200
    rewrite pop 1
```

- Объединяем порт с интерфейсами:
```yml
interface int1
  connect port ge1 service-instance ge1/int1
!
interface int2
  connect port ge1 service-instance ge1/int2
```

<br/>

#### Адресация на BR-RTR (без разделения на VLAN) настраивается аналогично примеру выше

<br/>

#### Добавление маршрута по умолчанию в EcoRouter

Прописываем следующее:
```yml
ip route 0.0.0.0 0.0.0.0 *адрес шлюза*
```

</details>

<br/>
